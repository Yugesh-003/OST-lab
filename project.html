<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Online Voting System</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #eef2f3;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      .container {
        background: white;
        width: 420px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        padding: 20px;
      }

      h2 {
        text-align: center;
        margin-bottom: 15px;
      }

      /* Tabs */
      .tabs {
        display: flex;
        margin-bottom: 15px;
      }

      .tabs button {
        flex: 1;
        padding: 10px;
        border: none;
        cursor: pointer;
        font-size: 15px;
        background: #ddd;
      }

      .tabs button.active {
        background: #007bff;
        color: white;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      label {
        font-weight: bold;
      }

      input[type='text'],
      input[type='date'] {
        width: 100%;
        padding: 8px;
        margin: 6px 0 12px;
      }

      /* FIXED RADIO ALIGNMENT */
      .candidate {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0;
      }

      button.submit {
        width: 100%;
        padding: 10px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 10px;
      }

      button.submit:hover {
        background: #0056b3;
      }

      #result {
        text-align: center;
        font-weight: bold;
        margin-top: 15px;
      }

      .tabs button {
        flex: 1;
        padding: 10px;
        border: none;
        cursor: pointer;
        font-size: 15px;
        background: #ddd;
        transition: transform 0.2s;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h2>üó≥ Online Voting System</h2>

      <!-- Tabs -->
      <div class="tabs">
        <button
          class="active"
          onclick="openTab('voteTab')"
          onmouseover="this.style.transform='scale(1.05)'"
          onmouseout="this.style.transform='scale(1)'"
        >
          Vote
        </button>
        <button
          onclick="openTab('resultTab')"
          onmouseover="this.style.transform='scale(1.05)'"
          onmouseout="this.style.transform='scale(1)'"
        >
          Results
        </button>
      </div>

      <!-- Vote Tab -->
      <div id="voteTab" class="tab-content active">
        <form onsubmit="submitVote(event)">
          <label>Name:</label>
          <input
            type="text"
            id="name"
            required
            onkeyup="validateName(event)"
            onfocus="this.style.borderColor='#007bff'"
            onblur="this.style.borderColor='#ccc'"
          />
          <div id="nameStatus" style="font-size: 12px; color: #666"></div>

          <label>Date of Birth:</label>
          <input type="date" id="dob" required onchange="checkAge()" />
          <div id="ageStatus" style="font-size: 12px; color: #666"></div>

          <label>Voter ID:</label>
          <input
            type="text"
            id="voterId"
            required
            onkeydown="formatVoterId(event)"
            onfocus="this.style.borderColor='#007bff'"
            onblur="this.style.borderColor='#ccc'"
          />

          <label>Select Candidate:</label>

          <div
            class="candidate"
            onmouseover="this.style.backgroundColor='#f0f8ff'"
            onmouseout="this.style.backgroundColor='transparent'"
          >
            <input
              type="radio"
              name="candidate"
              value="0"
              required
              onclick="selectCandidate('Alice')"
            />
            <span>Alice</span>
          </div>

          <div
            class="candidate"
            onmouseover="this.style.backgroundColor='#f0f8ff'"
            onmouseout="this.style.backgroundColor='transparent'"
          >
            <input type="radio" name="candidate" value="1" onclick="selectCandidate('Bob')" />
            <span>Bob</span>
          </div>

          <div
            class="candidate"
            onmouseover="this.style.backgroundColor='#f0f8ff'"
            onmouseout="this.style.backgroundColor='transparent'"
          >
            <input type="radio" name="candidate" value="2" onclick="selectCandidate('Charlie')" />
            <span>Charlie</span>
          </div>

          <div
            id="selectedCandidate"
            style="margin: 10px 0; font-weight: bold; color: #007bff"
          ></div>

          <button
            class="submit"
            type="submit"
            onmouseover="this.style.backgroundColor='#0056b3'"
            onmouseout="this.style.backgroundColor='#007bff'"
          >
            Submit Vote
          </button>
        </form>
      </div>

      <!-- Results Tab -->
      <div id="resultTab" class="tab-content">
        <div id="result">No votes yet.</div>
        <button
          onclick="refreshResults()"
          onmouseover="this.textContent='üîÑ Refresh Results'"
          onmouseout="this.textContent='Refresh'"
          style="
            margin-top: 10px;
            padding: 5px 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
          "
        >
          Refresh
        </button>
      </div>
    </div>

    <script>
      let candidates = ['Alice', 'Bob', 'Charlie'];
      let votes = [0, 0, 0];

      // Load event - Initialize voting system
      window.onload = function () {
        console.log('Voting system loaded at:', new Date().toLocaleTimeString());
        document.getElementById('name').focus();
      };

      function openTab(tabId) {
        let tabs = document.querySelectorAll('.tab-content');
        let buttons = document.querySelectorAll('.tabs button');

        tabs.forEach((tab) => tab.classList.remove('active'));
        buttons.forEach((btn) => btn.classList.remove('active'));

        document.getElementById(tabId).classList.add('active');
        event.target.classList.add('active');
      }

      function submitVote(event) {
        event.preventDefault();

        let name = document.getElementById('name').value;
        let voterId = document.getElementById('voterId').value;
        let selected = document.querySelector('input[name="candidate"]:checked');

        let confirmVote = confirm('Confirm Vote?\n\nName: ' + name + '\nVoter ID: ' + voterId);

        if (!confirmVote) {
          alert('Vote cancelled');
          return;
        }

        let index = Number(selected.value);
        votes[index]++;

        alert('Vote submitted successfully!');

        showResult();
        openTab('resultTab');
        event.target.reset();
      }

      function showResult() {
        let maxVotes = votes[0];
        let winnerIndex = 0;

        for (let i = 1; i < votes.length; i++) {
          if (votes[i] > maxVotes) {
            maxVotes = votes[i];
            winnerIndex = i;
          }
        }

        let output = 'Current Results:<br><br>';
        for (let i = 0; i < candidates.length; i++) {
          output += candidates[i] + ': ' + votes[i] + ' votes<br>';
        }

        output += '<br>üèÜ Current Winner: ' + candidates[winnerIndex];

        document.getElementById('result').innerHTML = output;
      }

      // Keyboard event - Name validation
      function validateName(event) {
        let name = event.target.value;
        let status = document.getElementById('nameStatus');
        if (name.length < 2) {
          status.textContent = 'Name too short';
          status.style.color = 'red';
        } else {
          status.textContent = '‚úì Valid name';
          status.style.color = 'green';
        }
      }

      // Keyboard event - Voter ID formatting
      function formatVoterId(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          document.querySelector('input[name="candidate"]').focus();
        }
      }

      // Mouse event - Candidate selection
      function selectCandidate(name) {
        document.getElementById('selectedCandidate').textContent = `Selected: ${name}`;
      }

      // Change event - Age verification
      function checkAge() {
        let dob = new Date(document.getElementById('dob').value);
        let today = new Date();
        let age = today.getFullYear() - dob.getFullYear();
        let status = document.getElementById('ageStatus');

        if (age >= 18) {
          status.textContent = '‚úì Eligible to vote';
          status.style.color = 'green';
        } else {
          status.textContent = '‚úó Must be 18+ to vote';
          status.style.color = 'red';
        }
      }

      // Mouse event - Refresh results
      function refreshResults() {
        showResult();
        console.log('Results refreshed at:', new Date().toLocaleTimeString());
      }
    </script>
  </body>
</html>
